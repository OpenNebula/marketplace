---
name: K3S 1.17 Template
version: 1.18.10-5.12.0.2-1.20201106.1
publisher: OpenNebula Systems
description: |-
  Appliance to deploy K3s server or agent; it is used by the K3s Service appliance to deploy K3s clusters.

  **Note**: Remember to update the template by adding the Firecracker kernel after importing it.
short_description: K3S agent
tags:
- k3s
- ubuntu
creation_time: 1614941299
os-id: Ubuntu
os-release: '18.04'
os-arch: x86_64
hypervisor: FIRECRACKER
type: 'VMTEMPLATE'
opennebula_version: 5.13, 6.0
disks:
  - 'K3S 1.17'
opennebula_template:
  context:
    k3s_dns_enable: "$K3S_DNS_ENABLE"
    k3s_flannel_backend: "$K3S_FLANNEL_BACKEND"
    k3s_ingress_enable: "$K3S_INGRESS_ENABLE"
    k3s_lb_enable: "$K3S_LB_ENABLE"
    k3s_role: "$K3S_ROLE"
    k3s_version: "$K3S_VERSION"
    network: "YES"
    set_hostname: "k3s-$K3S_ROLE-$VMID"
    ssh_public_key: "$USER[SSH_PUBLIC_KEY]"
    start_script_base64: 'c3RhcnRfc2VydmVyICgpIHsKICAjIGV4dGVybmFsX2lwICE9IG51bGwgKGUuZy4gQVdTIHByb3Zpc2lvbmluZykKICBFWFRFUk5BTF9JUD0kKG9uZWdhdGUgdm0gc2hvdyAtLWpzb24gfCBqcSAuVk0uVEVNUExBVEUuTklDWzBdLkVYVEVSTkFMX0lQIHwgc2VkIC1lICdzL14iLy8nIC1lICdzLyIkLy8nKQogICMgZXh0ZXJuYWxfaXAgPT0gbnVsbCAoZS5nLiBFUVVJTklYIHByb3Zpc2lvbmluZykKICBbWyAke0VYVEVSTkFMX0lQfSA9PSAibnVsbCIgXV0gJiYgRVhURVJOQUxfSVA9IiR7Vk1fSVB9IgoKICAjIHNldCBLM3Mgc2VydmVyIG9wdGlvbnMKICBLM1NfRVhURVJOQUxJUD0iLS1ub2RlLWV4dGVybmFsLWlwICR7RVhURVJOQUxfSVB9IgogIEszU19LVUJFQ09ORklHX01PREU9Ii0td3JpdGUta3ViZWNvbmZpZy1tb2RlIDYwMCIKICBLM1NfQ05JPSItLWZsYW5uZWwtYmFja2VuZD0ke0szU19GTEFOTkVMX0JBQ0tFTkR9IgogIEszU19MT0c9Ii0tbG9nIC90bXAvazNzLmxvZyIKICBLM1NfU1RPUkFHRT0iLS1kZWZhdWx0LWxvY2FsLXN0b3JhZ2UtcGF0aCAvdG1wL2szcy1zdG9yYWdlIgogIFtbICR7SzNTX0lOR1JFU1NfRU5BQkxFfSA9PSAiTk8iIF1dICYmIEszU19UUkFFRklLPSItLW5vLWRlcGxveSB0cmFlZmlrIgogIFtbICR7SzNTX0ROU19FTkFCTEV9ID09ICJOTyIgXV0gJiYgSzNTX0NPUkVETlM9Ii0tZGlzYWJsZSBjb3JlZG5zIgogIFtbICR7SzNTX0xCX0VOQUJMRX0gPT0gIk5PIiBdXSAmJiBLM1NfTEI9Ii0tZGlzYWJsZSBzZXJ2aWNlbGIiCgogIEszU19PUFRTPSIke0szU19FWFRFUk5BTElQfSAke0szU19LVUJFQ09ORklHX01PREV9ICR7SzNTX0NOSX0gJHtLM1NfTE9HfSAke0szU19TVE9SQUdFfSAke0szU19UUkFFRklLfSAke0szU19DT1JFRE5TfSAke0szU19MQn0iCgogICMgcnVuIEszcyBzZXJ2ZXIKICBub2h1cCBrM3Mgc2VydmVyICR7SzNTX09QVFN9ID4gL2Rldi9udWxsICYKCiAgIyBjaGVjayB0b2tlbiBmaWxlCiAgd2hpbGUgW1sgISAtZiAvdmFyL2xpYi9yYW5jaGVyL2szcy9zZXJ2ZXIvdG9rZW4gXV07IGRvIHNsZWVwIDI7IGRvbmUKCiAgIyB1cGRhdGUgVk0gbWV0YWRhdGEgd2l0aCB0b2tlbgogIG9uZWdhdGUgdm0gdXBkYXRlIC0tZGF0YSBLM1NfVE9LRU49JChjYXQgL3Zhci9saWIvcmFuY2hlci9rM3Mvc2VydmVyL3Rva2VuKQp9CgpzdGFydF9hZ2VudCAoKSB7CiAgSzNTX1NFUlZFUl9JRD0kKG9uZWdhdGUgc2VydmljZSBzaG93IC0tanNvbiB8IGpxICcuU0VSVklDRS5yb2xlc1tdIHwgc2VsZWN0KC5uYW1lPT0gInNlcnZlciIpIHwgLm5vZGVzWzBdLnZtX2luZm8uVk0uSUQnIHwgc2VkIC1lICdzL14iLy8nIC1lICdzLyIkLy8nKQogIEszU19TRVJWRVJfSVA9JChvbmVnYXRlIHZtIHNob3cgJHtLM1NfU0VSVkVSX0lEfSAtLWpzb24gfCBqcSAuVk0uVEVNUExBVEUuTklDWzBdLklQIHwgc2VkIC1lICdzL14iLy8nIC1lICdzLyIkLy8nKQogIEszU19UT0tFTj0kKG9uZWdhdGUgdm0gc2hvdyAke0szU19TRVJWRVJfSUR9IC0tanNvbiB8IGpxIC5WTS5VU0VSX1RFTVBMQVRFLkszU19UT0tFTiB8IHNlZCAtZSAncy9eIi8vJyAtZSAncy8iJC8vJykKICBLM1NfVVJMPSJodHRwczovLyR7SzNTX1NFUlZFUl9JUH06NjQ0MyIKCiMgZXh0ZXJuYWxfaXAgIT0gbnVsbCAoZS5nLiBBV1MgcHJvdmlzaW9uaW5nKQogIEszU19FWFRFUk5BTF9JUD0kKG9uZWdhdGUgdm0gc2hvdyAtLWpzb24gfCBqcSAuVk0uVEVNUExBVEUuTklDWzBdLkVYVEVSTkFMX0lQIHwgc2VkIC1lICdzL14iLy8nIC1lICdzLyIkLy8nKQojIGV4dGVybmFsX2lwID09IG51bGwgKGUuZy4gRVFVSU5JWCBwcm92aXNpb25pbmcpCiAgW1sgJHtLM1NfRVhURVJOQUxfSVB9ID09ICJudWxsIiBdXSAmJiBLM1NfRVhURVJOQUxfSVA9IiR7Vk1fSVB9IgoKIyBzZXQgSzNzIGFnZW50IG9wdGlvbnMKICBLM1NfT1BUUz0iLS10b2tlbiAke0szU19UT0tFTn0gLS1zZXJ2ZXIgJHtLM1NfVVJMfSAtLW5vZGUtZXh0ZXJuYWwtaXAgJHtLM1NfRVhURVJOQUxfSVB9IC0tbG9nIC90bXAvazNzX2FnZW50LmxvZyIKCiMgcnVuIEszcyBhZ2VudApub2h1cCBrM3MgYWdlbnQgJHtLM1NfT1BUU30gPiAvZGV2L251bGwgJgp9CgojIG1vdW50IGNvbnRleHQKbW91bnQgLUwgQ09OVEVYVCAvbW50CgojIGV4cG9ydCBLM1MgdmFyaWFibGVzCmV4cG9ydCAkKGdyZXAgSzNTIC9tbnQvY29udGV4dC5zaCB8IHNlZCAtZSAicy8nLy9nIikKCiMgZG93bmxvYWQgSzNzCndnZXQgLS1uby1jaGVjay1jZXJ0aWZpY2F0ZSAtTyAvdXNyL2xvY2FsL2Jpbi9rM3MgaHR0cHM6Ly9naXRodWIuY29tL2szcy1pby9rM3MvcmVsZWFzZXMvZG93bmxvYWQvJHtLM1NfVkVSU0lPTn0vazNzICYmIGNobW9kIDc1NSAvdXNyL2xvY2FsL2Jpbi9rM3MKCiMgc2V0IFZNIElQIGFuZCAvZXRjL2hvc3RzClZNX0lQPSQob25lZ2F0ZSB2bSBzaG93IC0tanNvbiB8IGpxIC5WTS5URU1QTEFURS5OSUNbMF0uSVAgfCBzZWQgLWUgJ3MvXiIvLycgLWUgJ3MvIiQvLycpCkhPU1ROQU1FPSQoaG9zdG5hbWUpCgpjYXQgPiAvZXRjL2hvc3RzIDw8IEVPRgoxMjcuMC4wLjEgbG9jYWxob3N0CiR7Vk1fSVB9ICR7SE9TVE5BTUV9CkVPRgoKZWNobyAiJHtLM1NfSU5HUkVTU19FTkFCTEV9IgplY2hvICIke0szU19ST0xFfSIKCiMgc3RhcnQgazNzCmlmIFsgJHtLM1NfUk9MRX0gPT0gImFnZW50IiBdOyB0aGVuCiAgICBzdGFydF9hZ2VudAplbHNlCiAgICBzdGFydF9zZXJ2ZXIKZmkKCiMgc2V0IFZNIFJlYWR5Cm9uZWdhdGUgdm0gdXBkYXRlIC0tZGF0YSBSRUFEWT1ZRVMKCnVtb3VudCAvbW50'
    token: "YES"
  cpu: "1"
  graphics:
    listen: "0.0.0.0"
    type: "VNC"
  memory: "2048"
  nic:
    network_mode: "auto"
  os:
    boot: ""
    kernel_cmd: "console=ttyS0 reboot=k panic=1 pci=off i8042.noaux i8042.nomux i8042.nopnp i8042.dumbkbd"
    kernel_ds: "$FILE[IMAGE_ID=<USER_ADD>]"
  sched_requirements: "CLUSTER=$EDGE_LOCATION"
  inputs_order: "EDGE_LOCATION,K3S_VERSION,K3S_DNS_ENABLE,K3S_INGRESS_ENABLE,K3S_LB_ENABLE,K3S_FLANNEL_BACKEND"
  vcpu: "2"
logo: k3s.png
images: []
